(this.webpackJsonptestapp=this.webpackJsonptestapp||[]).push([[0],{121:function(e,t,a){e.exports={content:"App_content__1Ahw5"}},128:function(e,t,a){e.exports={footer:"Footer_footer__2KHQQ"}},129:function(e,t,a){e.exports=a.p+"static/media/preloader.261bc4dd.svg"},156:function(e,t,a){e.exports=a(282)},161:function(e,t,a){},282:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(58),o=a.n(l),c=(a(161),a(20)),s=a(21),i=a(23),u=a(22),p=a(24),m=a(121),d=a.n(m),f=a(119),h=a(47),E=a.n(h),v=a(11),b=a(123),O=a(118),_=function(e){e.input;var t=e.meta,a=t.touched,n=t.error,l=e.children,o=a&&n;return r.a.createElement("div",{className:E.a.formControl+" "+(o?E.a.error:"")},r.a.createElement("div",null,l),o&&r.a.createElement("span",null,n))},g=function(e){var t=e.input,a=Object(b.a)(e,["input"]);return r.a.createElement(_,e,r.a.createElement("input",Object.assign({},t,a)))},y=function(e,t,a,n){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return r.a.createElement("div",null,r.a.createElement(O.a,Object.assign({placeholder:e,name:t,validate:a,component:n},l)))},j=a(25),k=a.n(j),w=a(40),N=a(37),L=a(44),S=a(125).create({baseURL:"https://test-api.dengiclick.kz/",headers:{Authorization:"dev RNpwpsljbnkSS"}}),C=function(e,t){return S.post("api/login",{username:e,password:t})},P=function(e){return S.post("api/token/refresh",{refresh_token:e})},A=function(e){return S.get("api/loans",{params:{},headers:{Authorization:"Bearer "+e}})},D=function(e,t){return S.get("api/loan/".concat(t,"/detail"),{params:{},headers:{Authorization:"Bearer "+e}})};function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(Object(a),!0).forEach((function(t){Object(N.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var F="testapp/auth/SET_USER_DATA",z={token:null,isAuth:!1},T=function(e,t){return{type:F,payload:{token:e,isAuth:t}}},R=function(){return function(){var e=Object(w.a)(k.a.mark((function e(t){var a,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("rt")){e.next=12;break}return a=localStorage.getItem("rt"),e.prev=2,e.next=5,P(a);case 5:(n=e.sent).data.data.token&&(t(T(n.data.data.token,!0)),localStorage.setItem("rt",n.data.data.refresh_token)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),t(T(null,!1));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return I({},e,{},t.payload);default:return e}},G=function(e){if(!e)return"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"},U=a(31),H=a(82),W=a.n(H),J=a(63),Q=a.n(J),Z=function(e){return r.a.createElement("button",{onClick:e.onClick,className:Q.a.defaultBtn},e.children)},M=Object(f.a)({form:"login"})((function(e){var t=e.handleSubmit,a=e.error;return r.a.createElement("form",{className:W.a.loginForm,onSubmit:t},y("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043b\u0435\u0444\u043e\u043d","username",[G],g),y("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c","password",[G],g,{type:"password"}),a&&r.a.createElement("div",{className:E.a.formSummaryError},a),r.a.createElement("div",null,r.a.createElement(Z,null,"\u0412\u0445\u043e\u0434")))})),q=Object(v.b)((function(e){return{isAuth:e.auth.isAuth}}),{login:function(e,t){return function(){var a=Object(w.a)(k.a.mark((function a(n){var r,l;return k.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,C(e,t);case 3:(r=a.sent).data.data.token&&(n(T(r.data.data.token,!0)),localStorage.setItem("rt",r.data.data.refresh_token)),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(0),l=a.t0.response.data.error.message.length>0?a.t0.response.data.error.message:"Some error",n(Object(L.a)("login",{_error:l}));case 11:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()}})((function(e){return e.isAuth?r.a.createElement(U.a,{to:"/loans"}):r.a.createElement("div",{className:W.a.login},r.a.createElement("h1",null,"\u0412\u0445\u043e\u0434 \u0432 \u043b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"),r.a.createElement(M,{onSubmit:function(t){e.login(t.username,t.password)}}))})),K=a(19),V=a(8);function $(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function X(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$(Object(a),!0).forEach((function(t){Object(N.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Y={initialized:!1},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"testapp/app/INITIALIZED_SUCCESS":return X({},e,{initialized:!0});default:return e}},te=a(127);function ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ne(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(a),!0).forEach((function(t){Object(N.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ae(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var re="testapp/loans/SET_LOANS",le={loans:[],loan:null,isFetching:!0},oe=function(e){return{type:"testapp/loans/TOGGLE_IS_FETCHING",isFetching:e}},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re:return ne({},e,{loans:t.loans});case"testapp/loans/SET_LOAN_DETAILS":return ne({},e,{loan:t.loan});case"testapp/loans/TOGGLE_IS_FETCHING":return ne({},e,{isFetching:t.isFetching});default:return e}},se=a(120),ie=Object(V.c)({app:ee,auth:B,loansPage:ce,form:se.a}),ue=Object(V.e)(ie,Object(V.d)(Object(V.a)(te.a))),pe=a(128),me=a.n(pe),de=function(e){return r.a.createElement("footer",{className:me.a.footer},r.a.createElement("p",null,"\u0422\u041e\u041e \u201c\u0414\u0435\u043d\u044c\u0433\u0438 \u043d\u0430\u0441\u0435\u043b\u0435\u043d\u0438\u044e\u201d"))},fe=a(86),he=a.n(fe),Ee=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(U.b,{render:function(t){var a=t.history;return r.a.createElement("button",Object.assign({className:Q.a.defaultBtn},e.props,{onClick:function(){a.push(e.props.to)}}),e.props.children)}})}}]),t}(r.a.Component),ve=function(e){return r.a.createElement("header",{className:he.a.header},r.a.createElement(K.b,{to:"/"},r.a.createElement("img",{className:he.a.logo,src:"https://dengiclick.kz/sites/all/themes/dclick/images/logo.png"})),r.a.createElement("div",null,e.isAuth?r.a.createElement(Z,{onClick:e.logout},"\u0412\u044b\u0439\u0442\u0438"):r.a.createElement(Ee,{to:"/login"},"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442")))},be=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(ve,Object.assign({},this.props,{login:this.login}))}}]),t}(r.a.Component),Oe=Object(v.b)((function(e){return{isAuth:e.auth.isAuth}}),{logout:function(){return function(e){e(T(null,!1)),localStorage.removeItem("rt")}}})(be),_e=a(130),ge=a(5),ye=a.n(ge),je=function(e){return r.a.createElement(K.b,{to:"/loans/"+e.id},r.a.createElement("div",{className:ye.a.loanCard+" "+(10!=e.status_id?ye.a.active:"")},r.a.createElement("div",{className:ye.a.loanCardContent},r.a.createElement("div",{className:ye.a.colLeft},r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("span",null,"\u0421\u0443\u043c\u0430 \u0437\u0430\u0439\u043c\u0430"),r.a.createElement("span",{className:ye.a.value},e.issue_amount),r.a.createElement("span",null,"\u0442\u0435\u043d\u0433\u0435")),r.a.createElement("p",null,r.a.createElement("span",null,"\u0421\u0440\u043e\u043a \u0417\u0430\u0439\u043c\u0430"),r.a.createElement("span",{className:ye.a.value},e.issue_term),r.a.createElement("span",null,"\u0434\u043d."))),r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("span",null,"\u0421\u0443\u043c\u0430 \u043e\u043f\u043b\u0430\u0442"),r.a.createElement("span",{className:ye.a.value},e.repaid_amount),r.a.createElement("span",null,"\u0442\u0435\u043d\u0433\u0435")),r.a.createElement("p",null,r.a.createElement("span",null,"\u041f\u0440\u043e\u0446\u0435\u043d\u0442\u043d\u0430\u044f \u0441\u0442\u0430\u0432\u043a\u0430"),r.a.createElement("span",{className:ye.a.value},e.interest)))),r.a.createElement("div",{className:ye.a.colRight},r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("span",null,"\u0421\u0442\u0430\u0442\u0443\u0441 \u0437\u0430\u0439\u043c\u0430"),r.a.createElement("span",{className:ye.a.value},e.status_name))),r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("span",null,"\u0421\u0440\u043e\u043a"),r.a.createElement("span",{className:ye.a.value+" "+ye.a.date},e.return_date)))))))},ke=a(87),we=a.n(ke);we.a.i18n={dayNames:[],monthNames:["\u042f\u043d\u0432","\u0424\u0435\u0432","\u041c\u0430\u0440","\u0410\u043f\u0440","\u041c\u0430\u0439","\u0418\u044e\u043d","\u0418\u044e\u043b","\u0410\u0432\u0433","\u0421\u0435\u043d","\u041e\u043a\u0442","\u041d\u043e\u044f","\u0414\u0435\u043a","\u042f\u043d\u0432\u0430\u0440\u044f","\u0424\u0435\u0432\u0440\u0430\u043b\u044f","\u041c\u0430\u0440\u0442\u0430","\u0410\u043f\u0440\u0435\u043b\u044f","\u041c\u0430\u044f","\u0418\u044e\u043d\u044f","\u0418\u044e\u043b\u044f","\u0410\u0432\u0433\u0443\u0441\u0442\u0430","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044f","\u041e\u043a\u0442\u044f\u0431\u0440\u044f","\u041d\u043e\u044f\u0431\u0440\u044f","\u0414\u0435\u043a\u0430\u0431\u0440\u044f"],timeNames:[]};var Ne=we.a,Le=function(e){var t=e.loans;e.isAuth;return r.a.createElement("div",{className:ye.a.loansList},Object(_e.a)(t).reverse().map((function(e){return r.a.createElement(je,{key:e.number,id:e.number,status:e.status,status_id:e.status_id,status_name:e.status_name,repaid_amount:e.repaid_amount,overdue_days:e.overdue_days,issue_amount:e.issue_amount,issue_term:e.issue_term,interest:e.interest,return_date:Ne(new Date(e.return_date),"d mmmm yyyy")})})))},Se=function(e){return r.a.createElement("div",{className:ye.a.loansList},r.a.createElement("div",{className:ye.a.loanCard+" "+(10!=e.status_id?ye.a.active:"")+" "+ye.a.details},r.a.createElement("div",{className:ye.a.loanCardContent},r.a.createElement("div",{className:ye.a.colLeft},r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("span",null,"\u041d\u043e\u043c\u0435\u0440 \u0437\u0430\u044f\u0432\u043a\u0438"),r.a.createElement("span",{className:ye.a.value},e.number)),r.a.createElement("p",null,r.a.createElement("span",null,"\u0421\u0440\u043e\u043a \u0417\u0430\u0439\u043c\u0430"),r.a.createElement("span",{className:ye.a.value},e.issue_term),r.a.createElement("span",null,"\u0434\u043d."))),r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("span",null,"\u041e\u0442"),r.a.createElement("span",{className:ye.a.value+" "+ye.a.date},e.issue_date)),r.a.createElement("p",null,r.a.createElement("span",null,"\u0434\u043e"),r.a.createElement("span",{className:ye.a.value+" "+ye.a.date},e.return_date))),r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("span",null,"\u0414\u043d\u0435\u0439 \u043f\u0440\u043e\u0441\u0440\u043e\u0447\u043a\u0438"),r.a.createElement("span",{className:ye.a.value},e.overdue_days))),r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("span",null,"\u041f\u0440\u043e\u0446\u0435\u043d\u0442\u043d\u0430\u044f \u0441\u0442\u0430\u0432\u043a\u0430"),r.a.createElement("span",{className:ye.a.value},e.interest))),r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("span",null,"\u0421\u0443\u043c\u0430 \u0437\u0430\u0439\u043c\u0430"),r.a.createElement("span",{className:ye.a.value},e.issue_amount),r.a.createElement("span",null,"\u0442\u0435\u043d\u0433\u0435"))),r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("span",null,"\u0421\u0443\u043c\u0430 \u043e\u043f\u043b\u0430\u0442"),r.a.createElement("span",{className:ye.a.value},e.repaid_amount),r.a.createElement("span",null,"\u0442\u0435\u043d\u0433\u0435")))),r.a.createElement("div",{className:ye.a.colRight},r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("span",{className:ye.a.value},e.status_name)))))))},Ce=function(e){return{isAuth:e.auth.isAuth}},Pe=a(129),Ae=a.n(Pe),De=function(e){return r.a.createElement("div",{style:{backgroundColor:"white"}},r.a.createElement("img",{src:Ae.a}))},xe=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"LoanDetails",value:function(){var e=this.props.match.params.id,t=this.props.token;this.props.getLoanDetails(t,e)}},{key:"Loans",value:function(){var e=this.props.token;this.props.getLoans(e)}},{key:"componentDidMount",value:function(){this.props.match.params.id?this.LoanDetails():this.Loans()}},{key:"componentDidUpdate",value:function(e,t,a){this.props.match.params.id!=e.match.params.id&&(this.props.match.params.id?this.LoanDetails():this.Loans())}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.props.match.params.id&&this.props.loan?this.props.isFetching?r.a.createElement(De,null):r.a.createElement(Se,Object.assign({},this.props.loan,{issue_date:Ne(new Date(this.props.loan.issue_date),"d mmmm yyyy"),return_date:Ne(new Date(this.props.loan.return_date),"d mmmm yyyy")})):this.props.isFetching?r.a.createElement(De,null):r.a.createElement(Le,{loans:this.props.loans}))}}]),t}(r.a.Component),Ie=Object(V.d)(Object(v.b)((function(e){return{token:e.auth.token,loans:e.loansPage.loans,loan:e.loansPage.loan,isFetching:e.loansPage.isFetching}}),{getLoans:function(e){return function(){var t=Object(w.a)(k.a.mark((function t(a){var n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(oe(!0)),t.prev=1,t.next=4,A(e);case 4:n=t.sent,a((r=n.data.data,{type:re,loans:r})),a(oe(!1)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),t.t0.response.data.code&&a(R());case 12:case"end":return t.stop()}var r}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},getLoanDetails:function(e,t){return function(){var a=Object(w.a)(k.a.mark((function a(n){var r;return k.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(oe(!0)),a.prev=1,a.next=4,D(e,t);case 4:r=a.sent,n({type:"testapp/loans/SET_LOAN_DETAILS",loan:r.data.data}),n(oe(!1)),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),a.t0.response.data.code&&n(R());case 12:case"end":return a.stop()}}),a,null,[[1,9]])})));return function(e){return a.apply(this,arguments)}}()}}),U.f,(function(e){var t=function(t){function a(){return Object(c.a)(this,a),Object(i.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(p.a)(a,t),Object(s.a)(a,[{key:"render",value:function(){return this.props.isAuth?r.a.createElement(e,this.props):r.a.createElement(U.a,{to:"/login"})}}]),a}(r.a.Component);return Object(v.b)(Ce)(t)}))(xe),Fe=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){if(!this.props.initialized)return r.a.createElement(De,null);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe,null),r.a.createElement("div",{className:d.a.content},r.a.createElement(U.b,{exact:!0,path:"/",render:function(){return r.a.createElement(Ee,{to:"/loans"},"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0437\u0430\u0439\u043c\u043e\u0432")}}),r.a.createElement(U.b,{path:"/login",render:function(){return r.a.createElement(q,null)}}),r.a.createElement(U.b,{path:"/loans/:id?",render:function(){return r.a.createElement(Ie,null)}})),r.a.createElement(de,null))}}]),t}(n.Component),ze=Object(V.d)(U.f,Object(v.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){console.log("initialize");var t=e(R());Promise.all([t]).then((function(){e({type:"testapp/app/INITIALIZED_SUCCESS"})}))}}}))(Fe),Te=function(e){return r.a.createElement(K.a,null,r.a.createElement(v.a,{store:ue},r.a.createElement(ze,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Te,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},47:function(e,t,a){e.exports={formControl:"FormsControls_formControl__1klTp",error:"FormsControls_error__2xEA_",formSummaryError:"FormsControls_formSummaryError__137Ou"}},5:function(e,t,a){e.exports={loansList:"Loans_loansList__2SJUd",loanCard:"Loans_loanCard__1cG52",value:"Loans_value__3RWTw",date:"Loans_date__2uoPw",active:"Loans_active__2GuQg",loanCardContent:"Loans_loanCardContent__ymxhq",colLeft:"Loans_colLeft__1jWIr",colRight:"Loans_colRight__1Rwwo",details:"Loans_details__o8Ndv"}},63:function(e,t,a){e.exports={defaultBtn:"Controls_defaultBtn__2SezC"}},82:function(e,t,a){e.exports={login:"Login_login__1t38E"}},86:function(e,t,a){e.exports={header:"Header_header__RfhZD",logo:"Header_logo__2Vzvw"}}},[[156,1,2]]]);
//# sourceMappingURL=main.36f7dc3d.chunk.js.map